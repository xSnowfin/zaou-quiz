<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è”µç‹ã‚¸ãƒ£ãƒ³ãƒ—å°ãƒ•ã‚§ã‚¹ãƒ†ã‚£ãƒãƒ« è¬è§£ãã‚¯ã‚¤ã‚ºãƒ©ãƒªãƒ¼ï¼</title>
  <style>
    body {
      font-family: 'Comic Sans MS', 'Arial', sans-serif;
      text-align: center;
      padding: 20px;
      background: linear-gradient(to bottom, #aee1f9, #ffffff);
      margin: 0;
    }
    h1 {
      color: #ff6600;
      text-shadow: 2px 2px #fff;
      font-size: 2.2em;
      margin-bottom: 20px;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: #fff8dc;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }
    .question { font-size: 1.3em; margin: 20px 0; color: #333; }
    .options button {
      display: block; width: 100%; margin: 8px 0; padding: 12px;
      border: none; border-radius: 15px; background: #87cefa;
      font-size: 1.1em; cursor: pointer; transition: background 0.3s;
    }
    .options button:hover { background: #1e90ff; color: white; }
    .hint {
      font-size: 1em; color: #555; background: #f0f8ff; padding: 8px;
      margin-top: 10px; border-left: 4px solid #00bfff;
      border-radius: 10px; display: none;
    }
    .keyword {
      color: #228b22; font-weight: bold; font-size: 1.3em;
      margin: 10px 0; background: #e0ffe0; padding: 5px; border-radius: 10px;
      display: inline-block;
    }
    #final-step input {
      padding: 10px; font-size: 1.2em; border-radius: 10px;
      border: 2px solid #aaa; margin: 10px 0; width: 80%; max-width: 300px;
    }
    #final-step button {
      background: #ffcc00; padding: 10px 20px; font-size: 1.2em;
      border: none; border-radius: 15px; cursor: pointer; transition: background 0.3s;
    }
    #final-step button:hover { background: #ffaa00; }
    #final-result { font-size: 1.3em; margin-top: 15px; color: #d2691e; font-weight: bold; }
  </style>
</head>
<body>
  <h1>è”µç‹ã‚¸ãƒ£ãƒ³ãƒ—å°ãƒ•ã‚§ã‚¹ãƒ†ã‚£ãƒãƒ« è¬è§£ãã‚¯ã‚¤ã‚ºãƒ©ãƒªãƒ¼ï¼</h1>
  <div class="container" id="main-container"></div>

  <script>
    // ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿
    const quizzes = {
      '1': { question: "è”µç‹ã‚¸ãƒ£ãƒ³ãƒ—å°ãŒå»ºè¨­ã•ã‚ŒãŸã®ã¯ã„ã¤ã§ã—ã‚‡ã†ã‹?",
        options: ["1976å¹´", "1978å¹´", "1980å¹´", "1982å¹´"], correct: 1, keyword: "ãƒ„",
        hint: "å—ä»˜ã§é…ã£ãŸãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆã‚’è¦‹ã‚ˆã†!" },
      '2': { question: "ã‚¸ãƒ£ãƒ³ãƒ—å°ã®ä¸‹ã‹ã‚‰ä¸Šã¾ã§ã®æ¨™é«˜å·®ã¨è¿‘ã„é«˜ã•ã®å»ºç‰©ã¯ã©ã‚Œã§ã—ã‚‡ã†ã‹?",
        options: ["å±±å½¢å¸‚å½¹æ‰€", "å±±å½¢çœŒåº", "ä¸Šå±±ã‚¹ã‚«ã‚¤ã‚¿ãƒ¯ãƒ¼", "éœåŸã‚»ãƒ³ãƒˆãƒ©ãƒ«"], correct: 3, keyword: "ãƒ£",
        hint: "ã‚¤ãƒ³ãƒ•ã‚©ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒŠãƒ¼æ¨ªã®çœ‹æ¿ã‚’è¦‹ã¦ã¿ã‚ˆã†!" },
      '3': { question: "é«™æ¢¨æ²™ç¾…é¸æ‰‹ãŒè”µç‹ã‚¸ãƒ£ãƒ³ãƒ—å°ã§å‡ºã—ãŸæœ€å¤§ã®é£›è·é›¢ã¯ï¼Ÿ",
        options: ["101.0m", "103.5m", "106.0m", "108.5m"], correct: 2, keyword: "ã‚§",
        hint: "ã‚¸ãƒ£ãƒ³ãƒ—å°ã«è¨­ç½®ã•ã‚Œã¦ã„ã‚‹çœ‹æ¿ã‚’è¦‹ã¦ã¿ã‚ˆã†!" },
      '4': { question: "ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒãƒ¼ãƒ³ã®æœ€å¤§æ–œåº¦ã¯ä½•åº¦ï¼Ÿ",
        options: ["35åº¦", "36.5åº¦", "38åº¦", "39.5åº¦"], correct: 1, keyword: "ã‚·",
        hint: "å—ä»˜ã§é…ã£ãŸãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆã‚’è¦‹ã‚ˆã†!" },
      '5': { question: "8æœˆã®ã‚µãƒãƒ¼ã‚¸ãƒ£ãƒ³ãƒ—å¤§ä¼šã§ç¬¬2ä½ã®å†…è—¤æ™ºæ–‡é¸æ‰‹ã®å‹¤å‹™å…ˆã¯ï¼Ÿ",
        options: ["è”µç‹æ¸©æ³‰å®¿æ³Šæ–½è¨­", "è”µç‹æ¸©æ³‰ã‚¹ã‚­ãƒ¼å ´", "å±±å½¢çœŒè·å“¡", "å±±å½¢å¸‚è·å“¡"], correct: 3, keyword: "ãƒ³",
        hint: "å—ä»˜ãƒ†ãƒ³ãƒˆã®æ–°èã‚³ãƒ”ãƒ¼ã‚’è¦‹ã¦ã¿ã‚ˆã†!" }
    };
    const finalAnswer = "ã‚·ãƒ£ãƒ³ãƒ„ã‚§";

    // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å–å¾—
    const params = new URLSearchParams(window.location.search);
    const qid = params.get("q");

    const container = document.getElementById("main-container");

    if (qid) {
      // ã‚¯ã‚¤ã‚ºãƒšãƒ¼ã‚¸
      const quiz = quizzes[qid];
      if (!quiz) {
        container.innerHTML = "<p>ã‚¯ã‚¤ã‚ºãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚</p>";
      } else {
        let html = `<div class="question">${quiz.question}</div>`;
        html += `<div class="options">`;
        quiz.options.forEach((opt, i) => {
          html += `<button onclick="checkAnswer(${i}, '${qid}')">${opt}</button>`;
        });
        html += `</div>`;
        html += `<button onclick="document.getElementById('hint').style.display='block'">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>`;
        html += `<div class="hint" id="hint">${quiz.hint}</div>`;
        container.innerHTML = html;
      }
    } else {
      // ã‚´ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸
      let keywords = [];
      Object.keys(quizzes).forEach(id => {
        const k = localStorage.getItem(`quiz${id}_cleared`);
        if (k) keywords.push(k);
      });

      // ã‚´ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã®HTML
      let html = `<h2>é›†ã‚ãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’çµ„ã¿åˆã‚ã›ã¦ç­”ãˆã‚’å…¥åŠ›ã—ã¦ã­ï¼</h2>`;
      if (keywords.length > 0) {
        html += keywords.map(k => `<div class="keyword">${k}</div>`).join("");
      } else {
        html += "<p>ã¾ã ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’é›†ã‚ã¦ã„ã¾ã›ã‚“ã€‚</p>";
      }

      if (keywords.length === Object.keys(quizzes).length) {
        // å…¨éƒ¨é›†ã¾ã£ãŸã¨ãã ã‘æœ€çµ‚è§£ç­”ã‚’å‡ºã™
        html += `
          <div id="final-step">
            <input type="text" id="final-answer" placeholder="ç­”ãˆã‚’å…¥åŠ›"><br>
            <button onclick="checkFinalAnswer()">é€ä¿¡</button>
            <p id="final-result"></p>
            <div id="survey-link"></div>
          </div>
        `;
      } else {
        html += `<p style="color:red; font-weight:bold;">âš ï¸ ã¾ã å…¨ã¦ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’é›†ã‚ã¦ã„ã¾ã›ã‚“ï¼</p>`;
      }

      container.innerHTML = html;
    }

    function checkAnswer(selected, id) {
      const quiz = quizzes[id];
      if (selected === quiz.correct) {
        alert("â­• æ­£è§£ï¼ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ã€" + quiz.keyword + "ã€ã§ã™");
        localStorage.setItem(`quiz${id}_cleared`, quiz.keyword);
      } else {
        alert("âŒ æ®‹å¿µï¼ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã‚ˆã†ï¼");
      }
    }

    function checkFinalAnswer() {
      const ans = document.getElementById("final-answer").value.trim();
      const result = document.getElementById("final-result");
      const survey = document.getElementById("survey-link");

      if (ans === finalAnswer) {
        result.innerHTML = "ğŸ‰ ã‚¯ãƒªã‚¢ãŠã‚ã§ã¨ã†ï¼";
        survey.innerHTML = `<p><a href="https://docs.google.com/forms/" target="_blank">ğŸ ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã«ã”å”åŠ›ãã ã•ã„ï¼</a></p>`;
      } else {
        result.innerHTML = "âŒ ç­”ãˆãŒé•ã†ã¿ãŸã„ã â€¦ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è¦‹ç›´ã—ã¦ã¿ã‚ˆã†ï¼";
        survey.innerHTML = "";
      }
    }
  </script>
</body>
</html>

